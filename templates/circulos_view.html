<!doctype html>
<html lang="pt-BR">
<head>
  <meta charset="utf-8" />
  <title>Círculo • Detalhe</title>
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <style>
    :root{
      --bg:#f6f7fb; --ink:#0f172a; --muted:#64748b; --card:#ffffff; --border:#e5e7eb;
      --brand:#2563eb; --brand-600:#1e40af; --brand-50:#eff6ff; --accent:#f59e0b;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family: system-ui, -apple-system, Segoe UI, Roboto, Arial, sans-serif; color:var(--ink);
      background:
        radial-gradient(1200px 800px at 80% -10%, #e0ebff 0, rgba(224,235,255,0) 60%),
        radial-gradient(1000px 600px at -10% 110%, #fff3d6 0, rgba(255,243,214,0) 60%),
        var(--bg);
    }
    .wrap{max-width:900px; margin:0 auto; padding:24px 16px 64px;}
    a.btn{height:40px; border:1px solid var(--border); border-radius:10px; padding:0 14px;
      display:inline-flex; align-items:center; gap:8px; text-decoration:none; color:inherit; background:#fff}
    .card{background:var(--card); border:1px solid var(--border); border-radius:16px; padding:16px; box-shadow:0 8px 20px rgba(15,23,42,.05)}
    .header{display:flex; justify-content:space-between; align-items:center; gap:12px; margin-bottom:14px}
    .title{margin:0; font-size:20px}
    .sub{color:var(--muted); font-size:13px}
    .badge{font-size:11px; border:1px solid var(--border); padding:2px 6px; border-radius:999px; margin-left:6px; color:#475569; background:#fff}
    .grid{display:grid; gap:12px; grid-template-columns: 1fr 1fr}
    @media (max-width: 820px){ .grid{grid-template-columns: 1fr} }
    .row{display:grid; grid-template-columns: 160px 1fr; gap:10px; align-items:center}
    .row .label{color:var(--muted); font-size:12px}
    .chip{display:inline-block; padding:4px 8px; border:1px solid var(--border); border-radius:999px; font-size:12px; margin:2px 6px 2px 0}
    .swatch{width:18px; height:18px; border-radius:6px; border:1px solid var(--border); display:inline-block; vertical-align:middle; margin-right:6px}
    .muted{color:var(--muted)}
    .block{white-space:pre-wrap}
    .circle-box{border:1px solid var(--border); border-radius:14px; padding:12px; background:#fff}
    .circle-box[data-color]{background: rgba(var(--c), .12); border-color: rgba(var(--c), .35)}
  </style>
</head>
<body>
  <div class="wrap">
    <div class="header">
      <a class="btn" href="{{ url_for('circulos_list') }}">← Voltar</a>
      <div class="muted">ID: {{ r.id }}</div>
    </div>

    <div class="card circle-box" {% if rgb_triplet %} data-color="1" style="--c: {{ rgb_triplet }}"{% endif %}>
      <h1 class="title" style="margin-bottom:6px">
        {{ r.nome_circulo or '— Sem nome —' }}
      </h1>
      <div class="sub">Ano: <strong>{{ r.ano }}</strong></div>

      <div class="grid" style="margin-top:12px">
        <div class="row">
          <div class="label">Cor do círculo</div>
          <div>
            {% set cor = r.cor_circulo or '' %}
            {% if cor %}
              <span class="swatch" style="background: {{ cor }}"></span>
              <span>{{ cor }}</span>
            {% else %}
              <span class="muted">—</span>
            {% endif %}
          </div>
        </div>

        <div class="row">
          <div class="label">Coordenadores (atuais)</div>
          <div>
            {% set at_e = (r.coord_atual_ele or '')|trim %}
            {% set at_a = (r.coord_atual_ela or '')|trim %}
            {% if at_e and at_a %}
              {{ at_e }} &amp; {{ at_a }}
            {% else %}
              <span class="muted">—</span>
            {% endif %}
          </div>
        </div>

        <div class="row">
          <div class="label">Coordenadores (originais)</div>
          <div>
            {{ r.coord_orig_ele }} &amp; {{ r.coord_orig_ela }}
            {% if not (at_e and at_a) %}<span class="badge">Original</span>{% endif %}
          </div>
        </div>

        <div class="row">
          <div class="label">Integrantes (IDs)</div>
          <div>
            {% set raw = (r.integrantes or '') %}
            {% set list = raw|replace(';', ',')|split(',') %}
            {% set any = False %}
            {% for it in list %}
              {% set t = it|trim %}
              {% if t %}
                {% set any = True %}
                <span class="chip">#{{ t }}</span>
              {% endif %}
            {% endfor %}
            {% if not any %}
              <span class="muted">—</span>
            {% endif %}
          </div>
        </div>

        <div class="row">
          <div class="label">Situação</div>
          <div>{{ r.situacao or '—' }}</div>
        </div>

        <div class="row" style="grid-column: 1 / -1">
          <div class="label">Observação</div>
          <div class="block">{{ r.observacao or '—' }}</div>
        </div>

        <div class="row">
          <div class="label">Criado em</div>
          <div class="muted">{{ r.created_at }}</div>
        </div>
      </div>
    </div>
  </div>
</body>
</html>
